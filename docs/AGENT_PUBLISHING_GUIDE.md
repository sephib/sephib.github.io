# Agent Publishing Guide for Pelican Blog

> Generated by Claude

This guide provides instructions for AI agents to create and publish blog posts
on this Pelican-based static site.

---

## Quick Reference

| Action | Command |
|--------|---------|
| Build site | `just build` |
| Preview locally | `just serve` (http://localhost:8000) |
| Build for production | `just publish` |
| Deploy to GitHub Pages | `just deploy` |
| Spell check all files | `just spellcheck` (or `just sp`) |
| Spell check specific file | `just sp content/my_post.md` |
| Spell check with fixes | `just spellcheck-fix` (or `just spf`) |
| Review (spellcheck + build) | `just review` |
| Full deploy workflow | `just deploy-full` |

---

## 1. Content Location

All blog content lives in `/content/`:

```
content/
├── *.md              # Markdown blog posts
├── *.ipynb           # Jupyter notebook posts
├── *.nbdata          # Metadata for notebooks
├── pages/            # Static pages (about.md)
└── images/           # Image assets
```

---

## 2. Creating a Markdown Post

### File Naming

- Use lowercase with underscores: `my_new_post.md`
- Files starting with `_` are ignored (drafts): `_work_in_progress.md`

### Required Frontmatter

```yaml
Title: Your Post Title Here
Date: YYYY-MM-DD
Author: Sephi Berry
Category: posts
```

### Optional Frontmatter

```yaml
Tags: python, pelican, tutorial
Summary: A brief description for previews and SEO
Slug: custom-url-slug
status: draft
```

### Complete Example

```markdown
Title: Building Data Pipelines with Python
Date: 2025-01-22
Author: Sephi Berry
Category: posts
Tags: python, data-engineering, pipelines
Summary: A practical guide to building robust data pipelines using modern Python tools.
Slug: python-data-pipelines

# Introduction

Your content starts here...

## Section Heading

More content with **bold** and *italic* text.

### Code Examples

```python
def example():
    return "Hello, World!"
```

### Images

![Alt text](/images/my-image.png)

### Links

[Link text](https://example.com)
```

---

## 3. Creating a Jupyter Notebook Post

### Notebook File

Place the `.ipynb` file in `/content/`.

### Metadata File

Create a companion `.nbdata` file with the same base name:

**Example:** `my_notebook.ipynb` → `my_notebook.nbdata`

```yaml
Title: Data Analysis with Pandas
Slug: pandas-data-analysis
Date: 2025-01-22 10:00
Category: posts
Tags: python, pandas, data-analysis
Author: Sephi Berry
Summary: Exploring data analysis techniques using Pandas and visualization libraries
```

---

## 4. Categories and Tags

### Categories

Use `Category: posts` for standard blog posts.
Categories should be singular, lowercase.

### Tags

- Comma-separated list
- Lowercase recommended
- Common tags in this blog:
  - `python`, `mlops`, `geospatial`, `data-engineering`
  - `pelican`, `neo4j`, `dagster`, `bokeh`
  - `tutorial`, `reflection`

---

## 5. Draft Posts

Two methods to mark a post as draft:

1. **Prefix with underscore:** `_my_draft.md` (ignored by Pelican)
2. **Status field:** Add `status: draft` to frontmatter

---

## 6. Build and Preview Workflow

### Local Development

```bash
# Build the site
just build

# Serve locally with live reload
just serve
```

Visit http://localhost:8000 to preview.

---

## 7. Publishing Workflow

### Step-by-Step

1. **Create/edit content** in `/content/`
2. **Preview locally:** `just serve`
3. **Verify** the post renders correctly at http://localhost:8000
4. **Commit changes** to the `dev` branch
5. **Publish:**

```bash
just deploy        # Build with production settings and deploy
# Or with spell check:
just deploy-full   # Spell check, build, and deploy
```

### What Happens on Publish

1. `just publish` - Generates site with `publishconf.py` (enables feeds, sets SITEURL)
2. `just deploy` - Uses `ghp-import` to push `/output/` to `master` branch
3. GitHub Pages serves content from `master` at https://sephib.github.io

---

## 8. Git Workflow

### Branch Structure

- `dev` - Source content and configuration (work here)
- `master` - Generated HTML only (auto-managed by ghp-import)

### Commit Checklist

Before committing:

- [ ] Post has valid frontmatter (Title, Date, Author, Category)
- [ ] Local preview renders correctly
- [ ] No broken links or missing images
- [ ] Spell-check content (`just sp` or automated via pre-commit)

### Pre-commit Hooks

This project uses pre-commit hooks for automated spell checking.

**Setup (one-time):**

```bash
uv sync
uv run pre-commit install
```

**Manual spell check:**

```bash
just spellcheck              # Check all content files
just sp content/my_post.md   # Check specific file
just spellcheck-fix          # Interactive fix mode (or just spf)
```

**Adding words to ignore list:**

Edit `.pre-commit-config.yaml` and add words to `--ignore-words-list`:

```yaml
args:
  - --ignore-words-list=word1,word2
```

---

## 9. Image Handling

### Adding Images

1. Place images in `/content/images/`
2. Reference in markdown:

```markdown
![Description](/images/my-image.png)
```

### External Images

```markdown
<img src="https://example.com/image.jpg" alt="Description" height="400" />
```

---

## 10. Common Issues

### Post Not Appearing

- Check frontmatter syntax (Title, Date required)
- Ensure file doesn't start with `_`
- Remove `status: draft` if ready to publish
- Verify Date is not in the future

### Jupyter Notebook Issues

- Ensure `.nbdata` file exists with matching base name
- Check metadata format in `.nbdata`

### Build Errors

```bash
# Clean and rebuild
just clean
just build
```

---

## 11. Configuration Files Reference

| File | Purpose |
|------|---------|
| `pelicanconf.py` | Development settings |
| `publishconf.py` | Production settings (extends pelicanconf) |
| `pyproject.toml` | Python dependencies |
| `justfile` | Build commands (run with `just <command>`) |

---

## 12. Agent Task Checklist

When publishing a new post:

```
[ ] 1. Create markdown file in /content/ with proper frontmatter
[ ] 2. Add any images to /content/images/
[ ] 3. Run: just sp content/my_post.md (spell check)
[ ] 4. Run: just serve
[ ] 5. Verify post at http://localhost:8000
[ ] 6. Git commit changes to dev branch
[ ] 7. Run: just deploy
[ ] 8. Verify live at https://sephib.github.io
```

---

## Example: Full Post Creation

```bash
# 1. Create the post
cat > content/my_new_post.md << 'EOF'
Title: My New Blog Post
Date: 2025-01-22
Author: Sephi Berry
Category: posts
Tags: python, tutorial
Summary: A brief summary of this post.

# Introduction

This is my new blog post content...
EOF

# 2. Spell check
just sp content/my_new_post.md

# 3. Preview
just serve

# 4. After verification, commit
git add content/my_new_post.md
git commit -m "feat(blog): add new post about topic

Assisted-by: Claude"

# 5. Deploy
just deploy
```
